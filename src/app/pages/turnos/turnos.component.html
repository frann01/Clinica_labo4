<br>
<br>

<div id="formContent">
    <h1>TURNOS</h1>
    <div style="width: 100%;">

        <div style="width: 100%;">
            <button class="boton-filtrar " (click)="MostrarFiltro()">FILTRAR</button>
        </div>
        <br>
        
    </div>
    <br>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Especialidad</th>
                <th >Especialista</th>
                <th >Paciente</th>
                <th>Fecha</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody *ngFor="let turno of turnosFiltrados">
            <tr>
                <td>{{turno.especialidad}}</td>
                <td>{{turno.especialista.apellido +", "+ turno.especialista.nombre}}</td>
                <td>{{turno.paciente.apellido +", "+ turno.paciente.nombre}}</td>
                <td>{{turno.fecha}}</td>
                <td>{{turno.estado}}</td>
                <td>
                    <div style="display: flex;">
                        <button class="boton_accion rojo" *ngIf="turno.estado!='finalizado' && turno.estado!='cancelado'">Cancelar</button>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <div style="text-align: center; width: 100%;" *ngIf="turnosFiltrados.length == 0"><h3 class="titulo" >No tiene turnos</h3></div>

    <div class="div_fondo_filtro" *ngIf="mostrarFiltro">
        <div class="div_filtro">
            <h3>FILTRAR</h3>

            <div style="width: 100%; height:100%" *ngIf="mostrarSelector">
                <div class="gridTurnos" style="display: flex;">
                    <button class="boton-filtro " (click)="MostrarFiltroEspecialidades()">ESPECIALIDAD</button>
                    <button class="boton-filtro " (click)="MostrarFiltroEspecialistas()">ESPECIALISTA</button>
                    <button class="boton-filtro " (click)="MostrarFiltroPacientes()">PACIENTE</button>
                    <button class="boton-filtro " (click)="QuitarFiltros()">QUITAR FILTROS</button>
                </div>
            </div>
            
            <div style="width: 100%; height:100%" *ngIf="mostrarFiltroEspecialistas">
                <div class="gridTurnos" style="display: flex;">
                    <button *ngFor="let especialista of auth.especialistas" (click)="SeleccionarFiltroEspecialista(especialista.uid)" class="boton-filtro " >{{especialista.apellido + ", " + especialista.nombre}}</button>
                </div>
            </div>

            <div style="width: 100%; height:100%" *ngIf="mostrarFiltroEspecialidades">
                <div class="gridTurnos" style="display: flex;">
                    <button *ngFor="let especialidad of base.especialidades" (click)="SeleccionarFiltroEspecialidades(especialidad.nombre)" class="boton-filtro ">{{especialidad.nombre}}</button>
                </div>
            </div>

            <div style="width: 100%; height:100%" *ngIf="mostrarFiltroPacientes">
                <div class="gridTurnos" style="display: flex;">
                    <button *ngFor="let paciente of auth.pacientes" (click)="SeleccionarFiltroPaciente(paciente)" class="boton-filtro ">{{paciente.apellido+", "+paciente.nombre}}</button>
                </div>
            </div>
        </div>
    </div>

    <div class="div_fondo_filtro" *ngIf="mostrarCancelar">
        <div class="div_filtro">
            <h3>Cancelar</h3>
            <br>

            <div style="width: 100%; height:100%">
                <h4>RAZÃ“N</h4> 
                <input type="text" [(ngModel)]="razon">
                <br>
                <button class="boton-Agregar" (click)="CancelarTurno()">Cancelar Turno</button>
            </div>
        </div>
    </div>
 </div>